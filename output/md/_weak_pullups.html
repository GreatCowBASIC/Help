<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Weak Pullups</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_miscellaneous_commands.html" title="Miscellaneous Commands"><link rel="prev" href="_poke.html" title="Poke"><link rel="next" href="_maths.html" title="Maths"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_weak_pullups"></a>Weak Pullups</h4></div></div></div><p><code class="literal">Weak pullups</code> provide a method within many microcontrollers such as the Atmel AVR and Microchip PIC microcontrollers to support internal/selectable pull-ups for convenience and reduced parts count.</p><p>If you require <code class="literal">Weak pullups</code> these internal pullups can provide a simple solution. For example, you can use them to ground input pins with a switch closure - with the pullup enabled, the pin is held in a high state until the input line pulls it to ground. Be aware of possible EMI interference and also make sure to use a debounce routine.</p><p>If you need your weak pullups to exactly control current (rare for most microcontroller applications), then you should consider 10k resistors (5V/10K = 500uA)  Why? If you review in the microcontroller data sheet, there is no resistance given for the weak pullups. That is because they are not weak pull-resistors they are weak pullups consisting of what appear to be high-resistance channel pFETs.  Their channel resistance will vary with temperature and between parts; not easy to characterize.</p><p>The data sheet gives a current range for the internals as 50-400uA (at 5V).</p><p>PORTs can have an individually controlled weak internal pullup. When set, each bit of the appropriate Microchip PIC register enables the corresponding pin pullup. There is a master bit within a specific register bit that enables pullups on all pins which also have their corresponding weak pull bit set.   Also when set, there is a weak pull register bit to disable all weak pullups.</p><p>The weak pullup is automatically turned off when the port pin is configured as an output.  The pullups are disabled on a Power-on Reset.</p><p>Each specific microcontroller has different registers/bits for this functionality.</p><p>You should review the datasheet for the method for a specific microcontroller.</p><p>The following code demonstrates how to set the weak pullups available on port B of an 18F25K20.</p><p><span class="strong"><strong>Example:</strong></span></p><pre class="screen">    'A program to show the use of weak pullups on portb.
    'Set chip model
    #chip 18F25k20,16 'at 16 MHz
    #config MCLR = Off

    Set RBPU = 0 'enabling Port B pullups in general.
    SET WPUB1 = 1 'portb.1 pulled up
    Set WPUB2 = 1 'portb.2
    Set WPUB3 = 1 'portb.3
    Set WPUB4 = 1 'portb.4

    Dir Portb in
    Dir Portc out

    do
        portc.1 = portb.1 'in pin 22, out pin 12
        portc.2 = portb.2 'in pin 23, out pin 13
        portc.3 = portb.3 'in pin 24, out pin 14
        portc.4 = portb.4 'in pin 25, out pin 15

    loop 'jump back to the start of the program

    'main line ends here
    end</pre><p>Also, see I2C Slave Hardware for an example using a 16F microcontroller.</p></div></body></html>