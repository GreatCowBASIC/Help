<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>HPWMUpdate for CCP/PWM Modules(s)</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_hpwm_ccp.html" title="HPWM CCP"><link rel="prev" href="_hpwm_ccp.html" title="HPWM CCP"><link rel="next" href="_hpwmoff.html" title="HPWMOff"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="_hpwmupdate_for_ccp_pwm_modules_s"></a>HPWMUpdate for CCP/PWM Modules(s)</h6></div></div></div><p><span class="strong"><strong>Syntax:</strong></span></p><pre class="screen">    HPWMUpdate ( channel, duty_cycle )</pre><p><span class="strong"><strong>Command Availability:</strong></span></p><p>Available on Microchip PIC microcontrollers with the CCP module.</p><p><span class="strong"><strong>Explanation:</strong></span></p><p>This command updates the <span class="strong"><strong>duty cycle only</strong></span>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">You <span class="strong"><strong>MUST</strong></span> have previously called the HPWM CCP command using the full command to set the channel specific settings for frequency and timer source.&nbsp;&nbsp;See the example below for the usage.</li><li class="listitem">You <span class="strong"><strong>MUST</strong></span> specify the constant #define <code class="literal">HPWM_FAST</code> to support HPWMUpdate when using CCP module.</li></ul></div><p>This command only supports the previously called HPWM CCP command, or, if you have set more than one HPWM CCP channel then to use the command you must have set the channel to the same frequency.</p><p>The command only supports the CCP module of the Microchip PIC microcontroller to generate
a PWM waveform at the previously defined frequency and timer source.</p><p><code class="literal"><span class="emphasis"><em>channel</em></span></code> is 1, 2, 3, 4 or  5. These corresponds to the CCP1 through to CCP5 respectively.&nbsp;&nbsp;The channel <span class="strong"><strong>MUST</strong></span> be supported by the microcontroller.&nbsp;&nbsp;&nbsp;Check the microcontroller specific datasheet for the available channel.</p><p><code class="literal"><span class="emphasis"><em>duty cycle</em></span></code> specifies the desired duty cycle of the PWM signal, and
ranges from 0 to 255 where 255 is 100% duty cycle.</p><p><span class="strong"><strong>Example for CCP PWM:</strong></span></p><pre class="screen">    'This program will alter the brightness of an LED using
    'hardware PWM.

    #chip 16F1938
    #option Explicit

    'Set the direction of the CCP/PWM port
    DIR portc.2 Out

    #define HPWM_FAST           'Required to support HPWMUpdate when using CCP module
    HPWM 1, 40, dutyvalue

    do
        'use for-loop to show the duty changing a 8bit value
        dim dutyvalue as byte
        for dutyvalue = 0 to 255
            HPWMUpdate 1, dutyvalue
            wait 10 ms
        next
        for dutyvalue = 254 to 1
            HPWMUpdate 1, dutyvalue
            wait 10 ms
        next
    loop</pre><p><span class="strong"><strong>For more help, see</strong></span> <a class="link" href="_pwmoff.html" title="PWMOff">PWMOff</a></p></div></body></html>