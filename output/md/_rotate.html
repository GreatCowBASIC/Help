<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Rotate</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_variables_operations.html" title="Variables Operations"><link rel="prev" href="_dectobcd_gcb.html" title="DecToBcd_GCB"><link rel="next" href="_set.html" title="Set"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_rotate"></a>Rotate</h4></div></div></div><p><span class="strong"><strong>Syntax:</strong></span></p><pre class="screen">    Rotate <span class="emphasis"><em>variable</em></span> {Left | Right} [Simple]</pre><p><span class="strong"><strong>Command Availability:</strong></span></p><p>Available on all microcontrollers.</p><p><span class="strong"><strong>Explanation:</strong></span></p><p>The <code class="literal">Rotate</code> command will rotate <code class="literal"><span class="emphasis"><em>variable</em></span></code> one bit in a specified direction. The bit shifted will be placed in the Carry bit of the Status register (<code class="literal">STATUS.C</code>). <code class="literal">STATUS.C</code> acts as a ninth bit of the variable that is being rotated.</p><p><code class="literal"><span class="emphasis"><em>variable</em></span></code> supports Bytes, Word and Long variables.</p><p>When a variable is <span class="strong"><strong>rotated right</strong></span>, the bit in the <code class="literal">STATUS.C</code> location is placed into the MSB of the variable being rotated, and the LSB of the variable is placed into STATUS.C location.</p><p>When <span class="strong"><strong>rotated left</strong></span> the opposite occurs. The MSB of the variable is shifted to the <code class="literal">STATUS.C</code> bit and the LSB of the variable will contain what was previously in the <code class="literal">STATUS.C</code> bit location.</p><p>This table shows the operation of the <code class="literal">Rotate Left</code> command</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th align="left" valign="top"><span class="strong"><strong>Command</strong></span></th><th align="left" valign="top"><span class="strong"><strong><span class="emphasis"><em>variable</em></span></strong></span></th><th align="center" valign="top"><span class="strong"><strong>STATUS.C</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top"><p>Values at start:</p></td><td align="left" valign="top"><p>b'01110011'</p></td><td align="center" valign="top"><p>0</p></td></tr><tr><td align="left" valign="top"><p>Rotate Left</p></td><td align="left" valign="top"><p>b'11100110'</p></td><td align="center" valign="top"><p>0</p></td></tr><tr><td align="left" valign="top"><p>Rotate Left again</p></td><td align="left" valign="top"><p>b'11001100'</p></td><td align="center" valign="top"><p>1</p></td></tr><tr><td align="left" valign="top"><p>Rotate Left third time</p></td><td align="left" valign="top"><p>b'10011001'</p></td><td align="center" valign="top"><p>1</p></td></tr></tbody></table></div><p>As you may notice the STATUS.C bit added a 0 to the rotation. So this will take 9 shifts left to get back to the original value.</p><p><span class="strong"><strong>Simple option</strong></span></p><p>Many times you want to rotate the variable around like the STATUS.C bit wasn&#8217;t there so the MSB of the variable fills the LSB of the variable on Rotate Left or the LSB fills the MSB on Rotate Right. That is where the SIMPLE option comes in. It adds a hidden step that shifts the STATUS.C bit twice so the bit moves from one end of the variable to the other.</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th align="left" valign="top"><span class="strong"><strong>Command</strong></span></th><th align="left" valign="top"><span class="strong"><strong><span class="emphasis"><em>variable</em></span></strong></span></th><th align="center" valign="top"><span class="strong"><strong>STATUS.C</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top"><p>Values at start:</p></td><td align="left" valign="top"><p>b'01110011'</p></td><td align="center" valign="top"><p>0</p></td></tr><tr><td align="left" valign="top"><p>Rotate Left</p></td><td align="left" valign="top"><p>b'11100110'</p></td><td align="center" valign="top"><p>0</p></td></tr><tr><td align="left" valign="top"><p>Rotate Left again</p></td><td align="left" valign="top"><p>b'11001101'</p></td><td align="center" valign="top"><p>1</p></td></tr><tr><td align="left" valign="top"><p>Rotate Left third time</p></td><td align="left" valign="top"><p>b'10011011'</p></td><td align="center" valign="top"><p>1</p></td></tr></tbody></table></div><p>Notes:
The carry is also called SREG bit C, or simply C flag on AVR.</p><p>In some cases the Status.C or C flag may already be set because of prior operations in your program.
Therefore, it may be necessary to clear the C flag before using <code class="literal">Rotate</code>.
Use <code class="literal">Set C Off</code> before using the <code class="literal">Rotate</code> command to clear the flag.</p><p><span class="strong"><strong>Example:</strong></span></p><pre class="screen">    'This program will use Rotate to show a chasing LED.
    '8 LEDs should be connected to PORTB, one on each pin.

    #chip 16F819, 8

    'Set port direction
    Dir PORTB Out

    'Set initial state of port (bits 0 and 4 on)
    PORTB = b'00010001'

    'Chase
    C = 0
    Do
        Rotate PORTB Right Simple
        Wait 250 ms
    Loop</pre></div></body></html>