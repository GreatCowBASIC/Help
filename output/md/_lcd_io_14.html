<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>LCD_IO 14</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_lcd_overview.html" title="LCD Overview"><link rel="prev" href="_lcd_io_12_port_configuration.html" title="LCD_IO 12 Port Configuration"><link rel="next" href="_lcd_io_14_port_configuration.html" title="LCD_IO 14 Port Configuration"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="_lcd_io_14"></a>LCD_IO 14</h5></div></div></div><p><span class="strong"><strong>Using connection mode 14:</strong></span></p><p>Using this LCD IO methof the LCD is controlled via an SPI expander.</p><p>To use mode 14 you must define the SPI ports as normal in your GCB code.
Then, define the LCD type, set the SPI address of the SPI expander, and, the LCD speed, if required.</p><div class="informalfigure"><div class="mediaobject" align="center"><img src="./images/lcd_io_14_1.png" align="middle" alt="graphic"></div></div><p><span class="strong"><strong>Relevant Constants:</strong></span></p><p>These constants are used to control settings for the LCD routines included with GCBASIC.&nbsp;&nbsp; To set them, place a line in the main program file that uses <code class="literal">#define</code> to assign a value to the particular constant.</p><p>When using this mode only three constants are mandated - all others can be ignored.</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th align="left" valign="top"><span class="strong"><strong>Constant Name</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Controls</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Value</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">LCD_IO</code></p></td><td align="left" valign="top"><p>I/O mode</p></td><td align="left" valign="top"><p><code class="literal">14</code></p></td></tr><tr><td align="left" valign="top"><p><code class="literal">LCD_SPI_DO</code></p></td><td align="left" valign="top"><p>Microcontroller SPI data out port</p></td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">LCD_SPI_SCK</code></p></td><td align="left" valign="top"><p>Microcontroller SPI clock out port</p></td><td align="left" valign="top"><p>Required</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">LCD_SPI_CS</code></p></td><td align="left" valign="top"><p>Microcontroller SPI chip select port</p></td><td align="left" valign="top"><p>Required</p></td></tr></tbody></table></div><p><span class="strong"><strong>Connectivity</strong></span></p><p>The connectivity is shown below.&nbsp;&nbsp;The microcontroller connections are as shown below.&nbsp;&nbsp;This is an example using the Microchip Explorer 8 board.</p><pre class="screen">    RC3 &gt; Expander SPI SCK ( clock)
    RC5 &gt; Expander SPI SI (slave in)
    RA2 &gt; Expander SPI CS ( chip select) - could be set to 0v0
    RB5 &gt; Expander Reset ( optional)</pre><div class="informalfigure"><div class="mediaobject" align="center"><img src="./images/lcd_io_14_2.png" align="middle" alt="graphic"></div></div><p><span class="strong"><strong>Optional configuration</strong></span></p><p>There are some options you can tweak. See the example setup below. You can play with the use of hardware or software SPI, SPI frequency ( HWSPIMODE MASTERFAST). LED speed, the connectivity between the expander and the LCD and otheroptions.</p><pre class="screen">        //Constants - LCD connectivity type; controls whether to use HW SPI; The inter character delay
        #define LCD_IO 14
        #define LCD_HARDWARESPI
        #define LCD_SPEED FAST
        #define HWSPIMODE MASTERFAST

        //These are the phyiscal connections from the expander to the LCD.  These are automatically set in the library and are shown here purely for clarity.
        #define     LCD_SPI_EXPD_ADDRESS        0x40     // address of the expander
        #define LCD_SPI_EXPANDER_E_ADDRESS      0x40     // GPA6 on the expander
        #define LCD_SPI_EXPANDER_RS_ADDRESS     0x80     // GPA7 on the expander

        //Pin mappings for LCD IO SPI Expander
        #define LCD_SPI_DO          portc.5             // constant is mandated
        #define LCD_SPI_SCK         portc.3             // constant is mandated
        #define LCD_SPI_CS          porta.2             // constant is required.
        // Optional(s) reset Port.Pin connection to expander, select one.
            // #define LCD_SPI_RESET_IN       portb.5
            #define LCD_SPI_RESET_OUT      portb.5</pre><p>For code examples see <a class="link" href="http://github.com/Anobium/Great-Cow-BASIC-Demonstration-Sources/tree/master/LCD_Solutions" target="_top">LCD Solutions</a>.</p><p>See the separate sections of the Help file for the specifics of each
Connection Mode.</p><p><span class="strong"><strong>For more help, see</strong></span>
<a class="link" href="_lcd_io_0.html" title="LCD_IO 0">LCD_IO 0</a>, <a class="link" href="_lcd_io_1.html" title="LCD_IO 1">LCD_IO 1</a>, <a class="link" href="_lcd_io_2.html" title="LCD_IO 2">LCD_IO 2</a>
<a class="link" href="_lcd_io_2_74xx164.html" title="LCD_IO 2_74xx164">LCD_IO 2_74xx164</a>, <a class="link" href="_lcd_io_2_74xx174.html" title="LCD_IO 2_74xx174">LCD_IO 2_74xx174</a>,
<a class="link" href="_lcd_io_4.html" title="LCD_IO 4">LCD_IO 4</a>, <a class="link" href="_lcd_io_8.html" title="LCD_IO 8">LCD_IO 8</a>,
<a class="link" href="_lcd_io_10.html" title="LCD_IO 10">LCD_IO 10</a>, <a class="link" href="_lcd_io_10.html" title="LCD_IO 10">LCD_IO 12</a></p></div></body></html>