<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Hardware PWM Code Optimisation</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_microchip_pic_pwm_overview.html" title="Microchip PIC PWM Overview"><link rel="prev" href="_pwmoff.html" title="PWMOff"><link rel="next" href="_atmel_avr_pwm_overview.html" title="ATMEL AVR PWM Overview"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="_hardware_pwm_code_optimisation"></a>Hardware PWM Code Optimisation</h5></div></div></div><p><span class="strong"><strong>About Hardware PWM Code Optimisation</strong></span></p><p>For compatibility all channels are supported by default.  This is maintains backward compatibility.<br></p><p>To mimise the code, use the following to disable support for a specific Capture/Compare/PWM (CCP) module, timers or the PWM module.<br></p><p>Setting a constant to <span class="emphasis"><em>FALSE</em></span> will remove the support of the capability from the method and therefore will reduce the program size.</p><pre class="screen">    #define USE_HPWMCCP1 FALSE
    #define USE_HPWMCCP2 FALSE
    #define USE_HPWMCCP3 FALSE
    #define USE_HPWMCCP4 FALSE</pre><p>To further mimise the code, use the following to disable support for a specific PWM channels.  Only PWM channels 5, 6 and 7 are supported.</p><pre class="screen">    #define USE_HPWM3 FALSE
    #define USE_HPWM4 FALSE
    #define USE_HPWM5 FALSE
    #define USE_HPWM6 FALSE
    #define USE_HPWM7 FALSE</pre><p>To further mimise the code, use the following to disable support for a specific timers.</p><pre class="screen">    #define USE_HPWM_TIMER2 TRUE
    #define USE_HPWM_TIMER4 TRUE
    #define USE_HPWM_TIMER6 TRUE</pre><p><span class="strong"><strong>Example</strong></span></p><p>This will save 335 bytes of program memory by removing support for CCP1, CCP2 and CCP4.</p><pre class="screen">    #chip 16f18855,32
    #Config MCLRE_ON

    UNLOCKPPS
        RC2PPS = 0x0A       'RC2-&gt;CCP2:CCP2;
    LOCKPPS

    #define USE_HPWMCCP1 FALSE       ' This is not used so optimise
    #define USE_HPWMCCP2 TRUE        ' This is used so include in the compiled code
    #define USE_HPWMCCP3 FALSE       ' This is not used so optimise
    #define USE_HPWMCCP4 FALSE       ' This is not used so optimise


    'Setting the port an output is VERY important... LED will not work if you do not set as an output.
    dir portC.2 out    ; CCP2

    do forever
            For Bright = 1 to 255
                HPWM 2, 40, Bright
                wait 10 ms
            next

    loop</pre></div></body></html>