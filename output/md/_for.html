<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>For</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_flow_control.html" title="Flow control"><link rel="prev" href="_exit.html" title="Exit"><link rel="next" href="_gosub.html" title="Gosub"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_for"></a>For</h4></div></div></div><p><span class="strong"><strong>Syntax:</strong></span></p><pre class="screen">    For <span class="emphasis"><em>counter</em></span> = <span class="emphasis"><em>start</em></span> To <span class="emphasis"><em>end</em></span> [Step <span class="emphasis"><em>increment</em></span>]
    ...
    <span class="emphasis"><em>program code</em></span>
    ...
    &lt;<span class="emphasis"><em>condition</em></span>&gt; Exit For
    ...
    Next</pre><p><span class="strong"><strong>Command Availability:</strong></span></p><p>Available on all microcontrollers.</p><p><span class="strong"><strong>Explanation:</strong></span></p><p>The For command is ideal for situations where a piece of code needs to
be run a set number of times, and where it is necessary to keep track of
how many times the code has run. When the For command is first executed,
<code class="literal"><span class="emphasis"><em>counter</em></span></code> is set to <code class="literal"><span class="emphasis"><em>start</em></span></code>. Then, each successive time the program
loops, <code class="literal"><span class="emphasis"><em>increment</em></span></code> is added to <code class="literal"><span class="emphasis"><em>counter</em></span></code>, until <code class="literal"><span class="emphasis"><em>counter</em></span></code> is equal to
<code class="literal"><span class="emphasis"><em>end</em></span></code>. Then, the program continues beyond the Next.</p><p><code class="literal"><span class="emphasis"><em>Step</em></span></code> and <code class="literal"><span class="emphasis"><em>increment</em></span></code> are optionals. If Step is not specified, GCBASIC
will increment <code class="literal"><span class="emphasis"><em>counter</em></span></code> by 1 each time the code is run.</p><p>Step is an integer value.&nbsp;&nbsp;Step value can positive of negative.&nbsp;&nbsp;When using advanced variable you must cast the step value as an integer, see the example below.</p><p><code class="literal"><span class="emphasis"><em>increment</em></span></code> can be a positive or negative constant or an integer.</p><p>The <code class="literal">Exit For</code> is optional and can be used to exit the loop upon a specific
condition.</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><code class="literal">#define USELEGACYFORNEXT</code> to enable legacy FOR-NEXT support.&nbsp;&nbsp;
The GCBASIC compiler was revised in 2021 to improve the handling of the FOR-NEXT support.&nbsp;&nbsp;
You can revert to the legacy FOR-NEXT support by using <code class="literal">#DEFINE USELEGACYFORNEXT</code> but using this legacy support will cause your program to operate incorrectly. &nbsp;&nbsp;
The use of <code class="literal">#DEFINE USELEGACYFORNEXT</code> is NOT recommended.</p></div><p><span class="strong"><strong>Examples.</strong></span></p><p><span class="strong"><strong>Example 1:</strong></span></p><pre class="screen">    'This code will flash a green light 6 times.

    #chip 16F88, 8

    #define LED PORTB.0
    Dir LED Out

    For LoopCounter = 1 to 6

      PulseOut Led, 1 s
      Wait 1 s

    Next</pre><p><span class="strong"><strong>Example 2:</strong></span></p><pre class="screen">'This code will flash alternate LEDS until the switch is pressed.

    #chip 16F88, 8

    #define LED1 PORTB.0
    Dir LED1 Out
    #define LED2 PORTB.2
    Dir LED2 Out

    #define SWITCH1 PORTA.0
    Dir SWITCH1 In
    main:
    PulseOut LED1, 1 s
    For LoopCounterOut = 1 to 250

      PulseOut LED2, 4 Ms
      if switch = On then Exit For

    Next
    Set LED2 OFF
    goto main</pre><p><span class="strong"><strong>Example 3:</strong></span></p><p>This example show casting the step value as an integer.&nbsp;&nbsp;The step value in this example is the integer value of 2.</p><pre class="screen">    #script
        // Create a constant
        Pi = 22/7
    #endscript

    Dim myCircumference, myRadius as Single
    Dim myDiameter as Single Alias myCircumference_E, myCircumference_U, myCircumference_H, myCircumference

    HserPrintCRLF

    For MyRadius = 0.5 to 10.5 step [integer]2
        myCircumference=myRadius * Pi * 2
        HSerPrint "myRadius = " + ltrim(SingleToString(myRadius))
        HSerPrintStringCRLF " myCircumference = " + ltrim(SingleToString(myCircumference))
    next</pre><p><span class="strong"><strong>For more help, see <a class="link" href="_repeat.html" title="Repeat">Repeat</a></strong></span></p></div></body></html>