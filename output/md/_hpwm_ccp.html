<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>HPWM CCP</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_microchip_pic_pwm_overview.html" title="Microchip PIC PWM Overview"><link rel="prev" href="_pwmout.html" title="PWMOut"><link rel="next" href="_hpwmupdate_for_ccp_pwm_modules_s.html" title="HPWMUpdate for CCP/PWM Modules(s)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="_hpwm_ccp"></a>HPWM CCP</h5></div></div></div><p><span class="strong"><strong>Syntax:</strong></span></p><pre class="screen">    HPWM <span class="emphasis"><em>channel, frequency, duty cycle</em></span></pre><p><span class="strong"><strong>Command Availability:</strong></span></p><p>Only available on Microchip PIC microcontrollers with Capture/Compare/PWM (CCP)
module.</p><p>This command supports the CCP 8 bit support with <span class="strong"><strong>Timer 2 only</strong></span>.<br></p><p>For CCP/PWM support for timers 2, 4 and 6, if the specific devices supports alternative CCP/PWM clock sources - see here <a class="link" href="_hpwm_ccptimern.html" title="HPWM_CCPTimerN">HPWM_CCPTimerN</a></p><p>For PWM 10 Bit support with other timers - see here <a class="link" href="_hpwm_10_bit.html" title="HPWM 10 Bit">HPWM 10 Bit</a></p><p><span class="strong"><strong>Explanation:</strong></span></p><p>This command sets up the hardware PWM module of the Microchip PIC microcontroller to generate
a PWM waveform of the given frequency and duty cycle.<br></p><p>If you only need one particular frequency and duty cycle, you should use PWMOn and
the constants PWM_Freq and PWM_Duty instead.</p><p><code class="literal"><span class="emphasis"><em>channel</em></span></code> is 1, 2, 3, 4 or 5, and corresponds to the pins CCP1, CCP2, CCP3, CCP4 and CCP5
respectively. On chips with only one CCP port, pin CCP or CCP1 is always
used, and <code class="literal"><span class="emphasis"><em>channel</em></span></code> is ignored. (It should be set to 1 anyway to allow
for future upgrades to more powerful microcontrollers.)</p><p><code class="literal"><span class="emphasis"><em>frequency</em></span></code> sets the frequency of the PWM output. It is measured in KHz.
The maximum value allowed is 255 KHz. The minimum value varies depending
on the clock speed. 1 KHz is the minimum on chips 16 MHz or under and 2
Khz is the lowest possible on 20 MHz chips. In situations that do not
require a specific PWM frequency, the PWM frequency should equal
approximately 1 five-hundredth the clock speed of the microcontroller (ie 40 Khz on
a 20 MHz chip, 16 KHz on an 8 MHz chip). This gives the best duty cycle
resolution possible.</p><p><code class="literal"><span class="emphasis"><em>duty cycle</em></span></code> specifies the desired duty cycle of the PWM signal, and
ranges from 0 to 255 where 255 is 100% duty cycle.</p><p>To stop the PWM signal use the <code class="literal">HPWMOff</code> method with the parameter of the channel.</p><pre class="screen">    'Stop the CCP/PWM signal
    HPWMOff ( 1 )</pre><p>The optional constant <code class="literal">HPWM_FAST</code> can be defined to enable the recalculation of the
timer prescaler when needed.  This will provide faster operation, but uses extra byte
of RAM and may cause problems if <code class="literal">HPWM</code> and <code class="literal">PWMOn</code> are used together in a program.
This will not cause any issue when using <code class="literal">HPWM</code> and <code class="literal">PWMOff</code> in the same program with <code class="literal">HPWM_FAST</code>.</p><p>The optional constant <code class="literal">DisableCCPFixedModePWM</code> can be defined to prevent Timer2 from being enabled.  This constant may be required when you need to use Timer2 for non-CCP/PWM support.</p><p><span class="strong"><strong>Example:</strong></span></p><pre class="screen">    'This program will alter the brightness of an LED using
    'CCP/PWM.

    'Select chip model and speed
    #chip 16F877A, 20

    'Set the CCP1 pin to output mode
    DIR PORTC.2 out

    'Main code
    do
        'Turn up brightness over the range
        For Bright = 1 to 255
            HPWM 1, 40, Bright
            wait 10 ms
        next
        'Turn down brightness over the range
        For Bright = 255 to 1 Step -1
            HPWM 1, 40, Bright
            wait 10 ms
        next
    loop</pre></div></body></html>