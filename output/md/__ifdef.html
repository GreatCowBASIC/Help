<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>#ifdef</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_compiler_directives.html" title="Compiler Directives"><link rel="prev" href="__ifnot.html" title="#ifnot"><link rel="next" href="__ifndef.html" title="#ifndef"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="__ifdef"></a>#ifdef</h3></div></div></div><p><span class="strong"><strong>Syntax:</strong></span></p><pre class="screen">    #ifdef <span class="emphasis"><em>Constant</em></span> | <span class="emphasis"><em>Constant Value</em></span> | Var(<span class="emphasis"><em>VariableName</em></span>)
      ...
    [#else]
      ...
    #endif</pre><p><span class="strong"><strong>Explanation:</strong></span></p><p>The <code class="literal">#ifdef</code> directive is used to selectively enable sections of code.</p><p>There are several ways in which it can be used:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Checking if a constant is defined<br></li><li class="listitem">Checking if a constant is defined and has a particular value<br></li><li class="listitem">Checking if a system variable exists<br></li><li class="listitem">Checking if a system bit has been defined</li></ul></div><p>The advantage of using <code class="literal">#ifdef</code> rather than an equivalent series of <code class="literal">IF</code> statements is the amount of code that is downloaded to the chip. <code class="literal">#ifdef</code> controls what code is compiled and downloaded, <code class="literal">IF</code> controls what is run once on the chip. <code class="literal">#ifdef</code> should be used whenever the value of a constant is to be checked.</p><p>GCBASIC also supports the <code class="literal">#ifndef</code> directive - this is the opposite of the <code class="literal">#ifdef</code> directive - it will remove code that <code class="literal">#ifdef</code> leaves, and vice versa.</p><p><span class="strong"><strong>Note:</strong></span>
The code in the following sections will not compile, as it is missing <code class="literal">#chip</code> directives and <code class="literal">Dir</code> commands. It is intended to act as an example only.</p><p><span class="strong"><strong>Example 1: <span class="emphasis"><em>Enabling code if a constant is defined</em></span></strong></span></p><pre class="screen">    #define Blink1

    #ifdef Blink1
        PulseOut PORTB.0, 1 sec
        Wait 1 sec
    #endif
    #ifdef Blink2
        PulseOut PORTB.1, 1 sec
        Wait 1 sec
    #endif</pre><p>This code will pulse <code class="literal">PORTB.0</code>, but not <code class="literal">PORTB.1</code>. This is because <code class="literal">Blink1</code> has been defined, but <code class="literal">Blink2</code> has not. If the line was added at the start of the program, then both pins would be pulsed.</p><pre class="screen">    #define Blink2</pre><p>The value of the constant defined is not important and can be left off of the <code class="literal">#define</code>.</p><p><span class="strong"><strong>Example 2: <span class="emphasis"><em>Enabling code if a constant is defined and has a given value</em></span></strong></span></p><pre class="screen">    #define PinsToFlash 2

    #ifdef PinsToFlash 1,2,3
      PulseOut PORTB.0, 1 sec
    #endif
    #ifdef PinsToFlash 2,3
      PulseOut PORTB.1, 1 sec
    #endif
    #ifdef PinsToFlash 3
      PulseOut PORTB.2, 1 sec
    #endif</pre><p>This program uses a constant called PinsToFlash that controls how many lights are pulsed. <code class="literal">PORTB.0</code> is pulsed when <code class="literal">PinsToFlash</code> is equal to 1, 2 or 3, <code class="literal">PORTB.1</code> is pulsed when <code class="literal">PinsToFlash</code> equals 2 or 3, and <code class="literal">PORTB.2</code> is flashed when <code class="literal">PinsToFlash</code> is 3.</p><p><span class="strong"><strong>Example 3: <span class="emphasis"><em>Enabling code if a system variable is defined</em></span></strong></span></p><pre class="screen">    #ifdef NoVar(ANSEL)
      SET ADCON1.PCFG3 OFF
      SET ADCON1.PCFG2 ON
      SET ADCON1.PCFG1 ON
      SET ADCON1.PCFG0 OFF
    #endif
    #ifdef Var(ANSEL)
      ANSEL = 0
    #endif</pre><p>The above section of code has been copied directly from a-d.h. It is used to disable the A/D function of pins, so that they can be used as standard digital I/O ports. If <code class="literal">ANSEL</code> is not declared as a system variable for a particular chip, then the program uses <code class="literal">ADCON1</code> to control the port modes. If <code class="literal">ANSEL</code> is defined, then the chip is newer and its ports can be set to digital by clearing <code class="literal">ANSEL</code>.</p><p><span class="strong"><strong>Example 4: <span class="emphasis"><em>Enabling code if a system bit is defined</em></span></strong></span></p><p>Similar to above, except with <code class="literal">Bit</code> and <code class="literal">NoBit</code> in the place of <code class="literal">Var</code> and <code class="literal">NoVar</code> respectively.</p><p><span class="strong"><strong>See Also</strong></span> <a class="link" href="_constants.html" title="Constants">Defines</a>, <a class="link" href="__define.html" title="#DEFINE">#define</a></p></div></body></html>