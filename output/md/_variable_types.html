<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Variable Types</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_microcontroller_fundamentals.html" title="Microcontroller Fundamentals"><link rel="prev" href="_data_types.html" title="Data Types"><link rel="next" href="_variable_advanced_types.html" title="Variable Advanced Types"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_variable_types"></a>Variable Types</h3></div></div></div><p><span class="strong"><strong>About Variables and Variable Types</strong></span></p><p>A variable is an area of memory on the microcontroller that can be used
to store a number or a series of letters. This is useful for many
purposes, such as taking a sensor reading and acting on it, or counting
the number of times the microcontroller has performed a particular task.</p><p>Each variable must be given a name, such as "MyVariable" or
"PieCounter". Choosing a name for a variable is easy - just don&#8217;t
include spaces or any symbols (other than _), and make sure that the
name is at least 2 characters (letters and/or numbers) long.</p><p><span class="strong"><strong>Variable Types</strong></span></p><p>There are several different types of variable, and each type can store a
different sort of information. These are the variable types that GCBASIC can currently use:</p><div class="informaltable"><table border="1" width="80%"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th align="left" valign="top"><span class="strong"><strong>Variable type</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Information that this variable can store</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Example uses for this type of variable</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top"><p>Bit</p></td><td align="left" valign="top"><p>A bit (0 or 1)</p></td><td align="left" valign="top"><p>Flags to track whether or not a piece of code has run</p></td></tr><tr><td align="left" valign="top"><p>Byte</p></td><td align="left" valign="top"><p>A whole number between 0 and 255</p></td><td align="left" valign="top"><p>General purpose storage of data, such as counters</p></td></tr><tr><td align="left" valign="top"><p>Word</p></td><td align="left" valign="top"><p>A whole number between 0 and 65535</p></td><td align="left" valign="top"><p>Storage of extra large numbers</p></td></tr><tr><td align="left" valign="top"><p>Integer</p></td><td align="left" valign="top"><p>A whole number between -32768 and 32767</p></td><td align="left" valign="top"><p>Anything where a negative number will occur</p></td></tr><tr><td align="left" valign="top"><p>Long</p></td><td align="left" valign="top"><p>A whole number between 0 and 2<sup>32</sup> (4.29 billion)</p></td><td align="left" valign="top"><p>Storing very, very big numbers</p></td></tr><tr><td align="left" valign="top"><p>Array</p></td><td align="left" valign="top"><p>A list of whole numbers, each of which may be a byte, word, integer, or long</p></td><td align="left" valign="top"><p>Logs of sensor readings</p></td></tr><tr><td align="left" valign="top"><p>String</p></td><td align="left" valign="top"><p>A series of letters, numbers and symbols.</p></td><td align="left" valign="top"><p>Messages that are to be shown on a screen</p></td></tr></tbody></table></div><p><span class="strong"><strong>Using Variables</strong></span></p><p>Byte variables do not need any special commands to set them up - just
put the name of the variable in to the command where the variable is
needed.</p><p>Other types of variable can be used in a very similar way, except that
they must be "dimensioned" first. This involves using the DIM command,
to tell GCBASIC that it is dealing with something other than a
byte variable.</p><p>A key feature of variables is that it is possible the have the
microcontroller check a variable, and only run a section of code if it
is a given value. This can be done with the IF command.</p><p><span class="strong"><strong>Number Variables</strong></span></p><p>You can assign values to number variables using&nbsp;&amp;#160`=`.&nbsp;&nbsp;</p><p>A simple, but typical example follows.&nbsp;&nbsp;This is the typical for numeric variable assignment.</p><pre class="screen">    myByteVarible = 127       'assign the value of 127</pre><p>GCBASIC support bitwise assignments s follows:</p><pre class="screen">    portc.0 = !porta.1  'set a single bit to the value of another bit</pre><p>The function <code class="literal">FnLSL</code> performs the shift operation found in other languages.  Here is an example:</p><pre class="screen">    MyVar = FnLSL( 1, BitNum)`  is Equivalent to `MyVar = 1&lt;&lt;BitNum`</pre><p>To set a bit of a port and to prevent glitches during operations, use <code class="literal">#option volatile</code> as folllows:</p><pre class="screen">    'add this option for a specific port.
    #option volatile portc.0

    'then in your code
    portc.0 = !porta.1</pre><p>To set a bit of a port or variable, encapsulate it in the <code class="literal">SetWith</code> method.  Using this method also eliminates any glitches during the update.</p><pre class="screen">    SetWith(MyPORT, MyPORT OR FnLSL( 1, BitNum))</pre><p>To clear a bit of a port, use this method:</p><pre class="screen">    MyPORT = MyPORT AND NOT FnLSL( 1, BitNum))</pre><p>To set a bit within an array, use this method:</p><pre class="screen">    video_buffer_A1(video_adress) = video_buffer_A1(video_adress) OR FnLSL( 1, BitNum)</pre><p>To set a bit within a variable, use this method:</p><pre class="screen">    Dim my_variable as byte
    Dim my_bit_address_variable as byte

    'example
    my_variable = 0
    my_bit_address_variable = 7

    my_variable.my_bit_address_variable = 1   ' where 1 or 0 or any bit address is valid

    'Sets bit 7 of my_variable therefore 128</pre><p><span class="strong"><strong>String Variables</strong></span></p><p>Strings are defined as follows:</p><pre class="screen">    'Create buffer variables to store received messages

    Dim Buffer As String</pre><p>String variables default to the following rules and the RAM constraints
of a specific chip.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">10 bytes for chips with less than 16 bytes of RAM.</li><li class="listitem">20 bytes for chips with 16 to 367 bytes of RAM.</li><li class="listitem">40 bytes for devices with more RAM than 367 bytes.</li><li class="listitem">For chips that have less RAM then the required RAM to support the user define strings the strings (and therefore the RAM) will be NOT be allocated. Please reduce string size.</li></ul></div><p>You cannot store a string 20 characters long in a chip with 16 bytes of RAM.</p><p>You can change the default string size handled internally by the GCBASIC compiler by changing the <code class="literal">STRINGSIZE</code> constant:</p><pre class="screen">    'set the default string to 24 bytes
    #define STRINGSIZE 24</pre><p>Defining a length for the string is the best way to limit memory usage.  It is good practice if you need a string of a certain size to set the length of a strings, since the default length for a string variable changes depending on the amount of memory in the microcontroller (see
above).</p><p>To set the length of a string, see the example below:</p><pre class="screen">    'Create buffer variables to store received messages as 16 bytes long
    Dim OutBuffer As String * 16</pre><p>To place quotation marks (" ") in a string of text. For example:</p><pre class="screen">    She said, "You deserve a treat!"</pre><p>To place quotation marks (") in a string of text, use two quotation marks in a row instead of one for each quote mark.  The following example shows two ways of printing <code class="literal">She said, "You deserve a treat!"</code>.  This technique works for all output methods (HSerPrint, Print, etc.)</p><pre class="screen">    HSerPrint "She said, ""You deserve a treat!"" "

    Dim myString As String * 39
    myString = "She said, ""You deserve another treat!"" "
    HSerPrint myString</pre><p><span class="strong"><strong>Variable Aliases</strong></span></p><p>Some variables are aliases, which are used to refer to memory locations used by other variables. These are useful for joining predefined byte variables together to form a word variable.</p><p>Aliases are not like pointers in many languages - they must always refer to the same variable or variables and cannot be changed.</p><p>When setting a register/variable bit ( i.e  my_variable.my_bit_address_variable ) and using a alias for the variable then you must ensure the bytes that construct the variable are consective.</p><p>The coding approach should be to DIMension the variable (word, integer, or long) first, then create the byte aliases:</p><pre class="screen">    Dim my_variable as LONG
    Dim ByteOne   as Byte alias my_variable_E
    Dim ByteTwo   as Byte alias my_variable_U
    Dim ByteThree as Byte alias my_variable_H
    Dim ByteFour  as Byte alias my_variable

    Dim my_bit_address_variable as Byte
    my_bit_address_variable = 23

    'set the bit in the variable
    my_variable.my_bit_address_variable = 1

    'then, use the four byte variables as you need to.</pre><p>To set a series of registers that are not consecutive, it is recommended to use a mask variable then apply it to the registers:</p><pre class="screen">    Dim my_variable as LONG
    Dim my_bit_address_variable as Byte
    my_bit_address_variable = 23

    'set the bit in the variable
    my_variable.my_bit_address_variable = 1

    porta =  my_variable_E
    portb =  my_variable_E
    portc =  my_variable_E
    portd =  my_variable_E</pre><p><span class="strong"><strong>Casting</strong></span></p><p>Casting changes the type of a variable or value.  To tell the compiler to perform a type conversion, put the desired type in square brackets before the variable.  The following example will cause two byte variables added together to be treated as a word variable.</p><pre class="screen">    Dim MyWord As Word
    MyWord = [word]ByteVar + AnotherByteVar</pre><p>Why do this?   Suppose that <code class="literal">ByteVar</code> is 150, and <code class="literal">AnotherByteVar</code> is 231.  When added, this will come to 381 - which will overflow, leaving 125 in the result.  However, when the cast is added, GCBASIC will treat <code class="literal">ByteVar</code> as if it were a word, and so will use the word addition code.  This will cause the correct result to be calculated.</p><p>It is good practice to cast when calculating an average:</p><pre class="screen">    MyAverage = ([word]Value1 + Value2) / 2</pre><p>It&#8217;s also possible to cast the second value instead of the first:</p><pre class="screen">    MyAverage = (Value1 + [word]Value2) / 2</pre><p>The result will be exactly the same.</p><p><br>
To apply operations to individual bits of variables see, <a class="link" href="_set.html" title="Set">Set</a>, <a class="link" href="_rotate.html" title="Rotate">Rotate</a>
<br>
<br></p><p>To check variables and apply logic based on their value, see
<a class="link" href="_if.html" title="If">If</a>, <a class="link" href="_do.html" title="Do">Do</a>, <a class="link" href="_for.html" title="For">For</a>, <a class="link" href="_conditions.html" title="Conditions">Conditions</a>
<br></p><p><span class="strong"><strong>For more help, see:</strong></span> <a class="link" href="_dim.html" title="Dim">Declaring variables with DIM</a>, <a class="link" href="_setting_variables.html" title="Setting Variables">Setting Variables</a></p></div></body></html>