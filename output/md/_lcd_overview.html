<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>LCD Overview</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_liquid_crystal_display.html" title="Liquid Crystal Display"><link rel="prev" href="_liquid_crystal_display.html" title="Liquid Crystal Display"><link rel="next" href="_lcd_io_0.html" title="LCD_IO 0"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_lcd_overview"></a>LCD Overview</h4></div></div></div><p><span class="strong"><strong>Introduction:</strong></span></p><p>The LCD routines in this section allow GCBASIC programs to control an
alphanumeric Liquid Crystal Displays based on the <span class="strong"><strong>HD44780</strong></span> IC. This
covers most 16 x 1, 16 x 2, 20 x 4 and 40 x 4 LCD displays.</p><p>The GCBASIC methods allow the displays to be connected to the microcontroller</p><p><span class="strong"><strong>Connection Modes:</strong></span></p><p>The table below shows the connection modes.  These modes support the connection to the LCD using differing methods.</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th align="center" valign="top">Connection Mode</th><th align="left" valign="top">Required Connections</th></tr></thead><tbody><tr><td align="center" valign="top"><p>0</p></td><td align="left" valign="top"><p>No configuration is required directly by this method. The LCD routines
<span class="strong"><strong>must</strong></span> be provided with other subroutines which will handle the
communication. This is useful for communicating with LCDs connected
through RS232 or I2C.
<br>
This is an advanced method of driving an LCD.</p></td></tr><tr><td align="center" valign="top"><p>1</p></td><td align="left" valign="top"><p>Uses a combined data and clock line. This mode is used when the LCD is connected through a
shift register 74HC595, as detailed at <a class="link" href="http://gcbasic.sourceforge.net/library/DIAGRAMS/1-Wire%20LCD/" target="_top"><span class="strong"><strong>here</strong></span></a>.
<br>
This method of driving an LCD requires an additional integrated circuit and other passive components.
This is not recommended for the beginner.</p></td></tr><tr><td align="center" valign="top"><p>2</p></td><td align="left" valign="top"><p>Uses separated Data and Clock lines. This mode is used when the LCD is connected
through a 74LS174 shift register IC, as detailed at
<a class="link" href="http://gcbasic.sourceforge.net/library/DIAGRAMS/2-Wire%20LCD/" target="_top"><span class="strong"><strong>here</strong></span></a>
<br>
This method of driving an LCD requires additional integrated circuits
and other passive components. This is not recommended for the beginner.</p></td></tr><tr><td align="center" valign="top"><p>3</p></td><td align="left" valign="top"><p><code class="literal">DB</code>, <code class="literal">CB</code>, <code class="literal">EB</code> are connected to the microcontroller as the Data, Clock and Enable Bits.
<br>
This a common method to connect a microcontroller to an LCD. This
requires 3 data ports on the microcontroller.</p></td></tr><tr><td align="center" valign="top"><p>4</p></td><td align="left" valign="top"><p><code class="literal">R/W</code>, <code class="literal">RS</code>, <code class="literal">Enable</code> and the highest 4 data lines (<code class="literal">DB4</code> through <code class="literal">DB7</code>) are
connected to the microcontroller. The use of the R/W line is optional.
<br>
This a common method to connect a microcontroller to an LCD. This
requires 7(6) data ports on the microcontroller.</p></td></tr><tr><td align="center" valign="top"><p>8</p></td><td align="left" valign="top"><p><code class="literal">R/W</code>, <code class="literal">RS</code>, <code class="literal">Enable</code> and all 8 data lines. The data lines must all be
connected to the same I/O port, in sequential order. For example, <code class="literal">DB0</code> to
<code class="literal">PORTB.0</code>, <code class="literal">DB1</code> to <code class="literal">PORTB.1</code> and so on, with`DB7` going to <code class="literal">PORTB.7</code>.
<br>
This is a common method to connect a microcontroller to a LCD. This
requires 11(10) data ports on the microcontroller.</p></td></tr><tr><td align="center" valign="top"><p>10</p></td><td align="left" valign="top"><p>The LCD is controlled via I2C. A type 10 LCD 12C adapter. Set <code class="literal">LCD_IO</code> to
<code class="literal">10</code> for the YwRobot LCD1602 IIC V1 or the Sainsmart LCD_PIC I2C adapter
<br>
This is a common method and requires two data ports on the microcontroller.</p></td></tr><tr><td align="center" valign="top"><p>12</p></td><td align="left" valign="top"><p>The LCD is controlled via I2C. A type 12 LCD 12C adapter. Set <code class="literal">LCD_IO</code> to
`12`for the Ywmjkdz I2C adapter with a potentiometer (variable resistance) bent over top of chip.
<br>
This is a common method and requires two data ports on the microcontroller.</p></td></tr><tr><td align="center" valign="top"><p>107</p></td><td align="left" valign="top"><p>The LCD is controlled via serial. Set <code class="literal">LCD_IO</code> to
<code class="literal">107</code> or <code class="literal">K107</code>.
<br>
The K107 requires one serial data ports on the microcontroller.</p></td></tr></tbody></table></div><p><br>
<br></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Supported LCDs mapped to Connection Mode</h3><p>The support of various types of LCD displays are shown in the following table.</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th align="left" valign="top">Supported LCD Type<br>
number of characters x number of lines</th><th align="left" valign="top">Connection Mode</th></tr></thead><tbody><tr><td align="left" valign="top"><p>16 x 1, 16 x 2, 20 x 2, 20 x 4 type LCD displays,<br>
also known as 1601, 1602, 2002, 2004 type LCD displays.</p></td><td align="left" valign="top"><p>0,1,2,4,8,10 and 12</p></td></tr><tr><td align="left" valign="top"><p>40 x 4 LCD displays,<br>
also known as 4004 type LCD displays.</p></td><td align="left" valign="top"><p>4</p></td></tr><tr><td align="left" valign="top"><p>16 x 1 LCD displays, with a non-standard/non-consective memory map.<br>
</p><p>This LCD sub type is supported using a specific constant.
</p><p>Use <code class="literal"><span class="strong"><strong>#define LCD_VARIANT 1601a</strong></span></code> to use this sub variant.
</p><p>Also known as 1601 type LCD displays.</p></td><td align="left" valign="top"><p>Supports any LCD_IO mode.</p></td></tr></tbody></table></div></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Communication Performance</h3><p>There may be a need to change the communication performance for a specific LCD as some LCD&#8217;s are slower to operate.  GCBASIC supports change the communications speed.</p><p>To change the performance (communications speed) of the LCD use <code class="literal">#DEFINE LCD_SPEED</code>.  This method allows the timing to be optimised.</p><p><span class="emphasis"><em>Example</em></span></p><pre class="screen"> #DEFINE LCD_SPEED  FAST</pre><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th align="left" valign="top">Define</th><th align="left" valign="top">Performance Characteristics</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">LCD_SPEED</code></p></td><td align="left" valign="top"><p><code class="literal">FAST</code>     - The speed is approximately 20,000 CPS.<br>
<code class="literal">MEDIUM</code>   - The speed is approximately 15,000 CPS.<br>
<code class="literal">SLOW</code>     - The speed is approximately 10,000 CPS.<br>
<code class="literal">OPTIMAL</code>  - The speed is approximately 30,000 CPS.<br></p></td></tr></tbody></table></div><p>If <code class="literal">LCD_SPEED</code> is not defined, the speed defaults to <code class="literal">SLOW</code>
<br>
<br>
&nbsp;&nbsp;
&nbsp;&nbsp;</p></div><p><b>Using LCD_Speed OPTIMAL<br>.&nbsp;</b>&nbsp;&nbsp;</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>&nbsp;&nbsp;
<code class="literal">OPTIMAL</code> disables fixed delays and allows the LCD operate as fast as it can.&nbsp;&nbsp;In this mode, The the busy flag is polled before each byte is sent to the HD44780 controller. &nbsp;&nbsp;This not only optimizes speed, but also assures that data is not sent to the diplay controler until it is ready to receive the data.</p><p>With most displays this equates to a speed of about 30,000 characters per second.&nbsp;&nbsp;For comparision about 10 times faster than I2C using a PC8574 Expander (See LCD_IO 10 or  See LCD_IO 112)</p><p><code class="literal">OPTIMAL</code> is only supported in LCD_IO 4,8 and only when LCD_NO_RW is not defined  (RW Mode).&nbsp;&nbsp;When <code class="literal">#DEFINE LCD_NO_RW</code> is defined, reading data from the HD44780 is not possible since this disables Read Mode on the controller.&nbsp;&nbsp;In this case busy flag checking is not available and the GET subroutine is not avaiable.</p><p>In order to enable busy flag checking, and, therefore to use the <code class="literal">GET</code> command the following criteria must be true.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">LCD I/O Mode must be either 4-wire or 8-wire</li><li class="listitem"><code class="literal">#DEFINE LCD_NO_RW</code> is not defined</li><li class="listitem">An I\O pin is connected between the microcontroller and the RW connection on the LCD Display</li><li class="listitem"><code class="literal">'DEFINE LCD_RW  port.pin</code> is defined in the GCBASIC source code</li></ol></div><p>Example:</p><pre class="screen">  #DEFINE LCD_IO 4
  #DEFINE LCD_SPEED OPTIMAL

  #DEFINE LCD_DB7 PORTB.5
  #DEFINE LCD_DB6 PORTB.4
  #DEFINE LCD_DB5 PORTB.3
  #DEFINE LCD_DB4 PORTB.2

  #DEFINE LCD_RW PORTA.3    'Must be defined for RW Mode
  #DEFINE LCD_RS PORTA.2
  #DEFINE LCD_ENABLE PORTA.1</pre></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Changing the LCD Width</h3><p>To change the LCD width characteristics use <code class="literal">#define LCD_WIDTH</code></p></div><p><br>
<br></p><p>See the separate sections of the Help file for the specifics of each Connection Mode.</p><p><span class="strong"><strong>For more help, see</strong></span>
<a class="link" href="_lcd_io_0.html" title="LCD_IO 0">LCD_IO 0</a>, <a class="link" href="_lcd_io_1.html" title="LCD_IO 1">LCD_IO 1</a>, <a class="link" href="_lcd_io_2.html" title="LCD_IO 2">LCD_IO 2</a>, <a class="link" href="_lcd_io_3.html" title="LCD_IO 3">LCD_IO 3</a>,
<a class="link" href="_lcd_io_2_74xx164.html" title="LCD_IO 2_74xx164">LCD_IO_2 74xx164</a>, <a class="link" href="_lcd_io_2_74xx174.html" title="LCD_IO 2_74xx174">LCD_IO_2 74xx174</a>,
<a class="link" href="_lcd_io_4.html" title="LCD_IO 4">LCD_IO 4</a>, <a class="link" href="_lcd_io_8.html" title="LCD_IO 8">LCD_IO 8</a>,
<a class="link" href="_lcd_io_10.html" title="LCD_IO 10">LCD_IO 10</a> or <a class="link" href="_lcd_io_12.html" title="LCD_IO 12">LCD_IO 12</a></p><p><span class="strong"><strong>and,</strong></span></p><p><a class="link" href="_lcd_width.html" title="LCD_WIDTH">LCD_Width</a>, <a class="link" href="_lcd_speed.html" title="LCD_SPEED">LCD_Speed</a></p></div></body></html>