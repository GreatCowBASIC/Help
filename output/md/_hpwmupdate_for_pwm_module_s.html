<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>HPWMUpdate for PWM Module(s)</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_hpwm_10_bit.html" title="HPWM 10 Bit"><link rel="prev" href="_hpwm_10_bit.html" title="HPWM 10 Bit"><link rel="next" href="_hpwmoff_3.html" title="HPWMOff"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h6 class="title"><a name="_hpwmupdate_for_pwm_module_s"></a>HPWMUpdate for PWM Module(s)</h6></div></div></div><p><span class="strong"><strong>Syntax:</strong></span></p><pre class="screen">    HPWMUpdate ( channel, duty_cycle )</pre><p><span class="strong"><strong>Command Availability:</strong></span></p><p>Available on Microchip PIC microcontrollers with the PWM module.</p><p><span class="strong"><strong>Explanation:</strong></span></p><p>This command updates the <span class="strong"><strong>duty cycle only</strong></span>.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">You <span class="strong"><strong>MUST</strong></span> have previously called the HPWM 10 Bit command using the full command (see <a class="link" href="_hpwm_10_bit.html" title="HPWM 10 Bit">HPWM 10 Bit</a>) to set the channel specific settings for frequency and timer source.&nbsp;&nbsp;See the example below for the usage.</li><li class="listitem">You <span class="strong"><strong>MUST</strong></span> have previously called the HPWM 10 Bit command with the same type of variable, or, use casting to ensure the variable tpye is the same type.</li></ul></div><p>This command only supports the previously called HPWM 10 Bit command, or, if you have set more than one HPWM 10 Bit PWM channel then to use the command you must have set the channel to the same frequency.</p><p>The command only supports the hardware PWM module of the Microchip PIC microcontroller to generate
a PWM waveform at the previously defined frequency and timer source.</p><p><code class="literal"><span class="emphasis"><em>channel</em></span></code> is 1, 2, 3, 4, 5, 6, 7 or 8. These corresponds to the HPWM1 through to HPWM8 respectively.&nbsp;&nbsp;The channel <span class="strong"><strong>MUST</strong></span> be supported by the microcontroller.&nbsp;&nbsp;&nbsp;Check the microcontroller specific datasheet for the available channel.</p><p><code class="literal"><span class="emphasis"><em>duty cycle</em></span></code> specifies the desired duty cycle of the PWM signal, and
ranges from 0 to 1023 where 1023 is 100% duty cycle.</p><p><span class="strong"><strong>Example for Hardware PWM:</strong></span></p><pre class="screen">    'This program will alter the brightness of an LED using
    'hardware PWM.

    'Select chip model and speed
    #chip 16F18855, 32

    'Generated by PIC PPS Tool for GCBASIC
    '
    'Template comment at the start of the config file
    '
    #startup InitPPS, 85

    Sub InitPPS

            'Module: PWM6
            RA2PPS = 0x000E    'PWM6OUT &gt; RA2

    End Sub
    'Template comment at the end of the config file


    'Set the PWM pin to output mode
    DIR PORTA.2 out

    'Setup PWM - this is mandated as this specifies the frequency and the clock source.
    'Uses casting [word] to ensure the intialisation value of Zero (0) is a treated as a word.  The variable type MUST match the HPWMUpdate variable type.
    HPWM 6, 40, [word]0, 2
    'Main code
    do
        'Turn up brightness over 2.5 seconds
        For Bright = 0 to 1023
            HPWMUpdate 6, Bright
            wait 10 ms
        next
        'Turn down brightness over 2.5 seconds
        For Bright = 1023 to 0 Step -1
            HPWMUpdate 6, Bright
            wait 10 ms
        next
    loop</pre><p><span class="strong"><strong>For more help, see</strong></span> <a class="link" href="_pwmoff.html" title="PWMOff">PWMOff</a>, <a class="link" href="_hpwm_10_bit.html" title="HPWM 10 Bit">HPWM 10 Bit</a></p></div></body></html>