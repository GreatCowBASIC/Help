<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Keypad Overview</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_keypad.html" title="Keypad"><link rel="prev" href="_keypad.html" title="Keypad"><link rel="next" href="_keypaddata.html" title="KeypadData"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="_keypad_overview"></a>Keypad Overview</h4></div></div></div><p><span class="strong"><strong>Introduction</strong></span></p><p>The keypad routines allow for a program to read from a 4 x 4 matrix
keypad.</p><p>There are two ways that the keypad routines can be set up. One option is
to connect the wires from the keypad in a particular order, and then to
set the KeypadPort constant. The other option is to connect the keypad
in whatever way is easiest, and then set the <code class="literal">KEYPAD_ROW_x</code> and
<code class="literal">KEYPAD_COL_x</code> constants. The option (setting <code class="literal">KeypadPort</code>) will
generate slightly more efficient code.</p><p><span class="strong"><strong>Configuration using</strong></span> <code class="literal">KEYPAD_ROW_x</code> <span class="strong"><strong>and</strong></span> <code class="literal">KEYPAD_COL_x</code>:</p><p>These constants must be set:</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th align="left" valign="top"><span class="strong"><strong>Constant Name</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Controls</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Default Value</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">KEYPAD_ROW_1</code></p></td><td align="left" valign="top"><p>The pin on the microcontroller that connects to the Row 1 pin on the
keypad</p></td><td align="left" valign="top"><p>N/A</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">KEYPAD_ROW_2</code></p></td><td align="left" valign="top"><p>The pin on the microcontroller that connects to the Row 2 pin on the
keypad</p></td><td align="left" valign="top"><p>N/A</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">KEYPAD_ROW_3</code></p></td><td align="left" valign="top"><p>The pin on the microcontroller that connects to the Row 3 pin on the
keypad</p></td><td align="left" valign="top"><p>N/A</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">KEYPAD_ROW_4</code></p></td><td align="left" valign="top"><p>The pin on the microcontroller that connects to the Row 4 pin on the
keypad</p></td><td align="left" valign="top"><p>N/A</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">KEYPAD_COL_1</code></p></td><td align="left" valign="top"><p>The pin on the microcontroller that connects to the Col 1 pin on the
keypad</p></td><td align="left" valign="top"><p>N/A</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">KEYPAD_COL_2</code></p></td><td align="left" valign="top"><p>The pin on the microcontroller that connects to the Col 2 pin on the
keypad</p></td><td align="left" valign="top"><p>N/A</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">KEYPAD_COL_3</code></p></td><td align="left" valign="top"><p>The pin on the microcontroller that connects to the Col 3 pin on the
keypad</p></td><td align="left" valign="top"><p>N/A</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">KEYPAD_COL_4</code></p></td><td align="left" valign="top"><p>The pin on the microcontroller that connects to the Col 4 pin on the
keypad</p></td><td align="left" valign="top"><p>N/A</p></td></tr></tbody></table></div><p>If using a 3 x 3 keypad, do not set the <code class="literal">KEYPAD_ROW_4</code> or <code class="literal">KEYPAD_COL_4</code>
constants.</p><p><span class="strong"><strong>Configuration using</strong></span> <code class="literal">KeypadPort</code>:</p><p>When setting up the keypad code using the <code class="literal">KeypadPort</code> constant, only
<code class="literal">KeypadPort</code> needs to be set.</p><p>Pull-ups or pull-downs go on the columns only, and are typically 4.7k to
10k in value.</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th align="left" valign="top"><span class="strong"><strong>Constant Name</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Controls</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Default Value</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">KeypadPort</code></p></td><td align="left" valign="top"><p>The port on the microcontroller chip that the keypad is connected to.</p></td><td align="left" valign="top"><p>N/A</p></td></tr></tbody></table></div><p><span class="strong"><strong>Configuration when using Pull down resistors</strong></span></p><p>The keypad routine has a feature when using pull-down resistors, simply
add the constant to your program and the and the scan logic will be
inverted appropriately.</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th align="left" valign="top"><span class="strong"><strong>Constant Name</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Controls</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Default Value</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">KEYPAD_PULLDOWN</code></p></td><td align="left" valign="top"><p>Support pull down resistors.</p></td><td align="left" valign="top"><p>N/A</p></td></tr></tbody></table></div><p>For this to work, the keypad must be connected as follows:</p><div class="informaltable"><table border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th align="left" valign="top"><span class="strong"><strong>Microcontroller port pin</strong></span></th><th align="left" valign="top"><span class="strong"><strong>Keypad connector</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top"><p>0</p></td><td align="left" valign="top"><p>Row 1</p></td></tr><tr><td align="left" valign="top"><p>1</p></td><td align="left" valign="top"><p>Row 2</p></td></tr><tr><td align="left" valign="top"><p>2</p></td><td align="left" valign="top"><p>Row 3</p></td></tr><tr><td align="left" valign="top"><p>3</p></td><td align="left" valign="top"><p>Row 4</p></td></tr><tr><td align="left" valign="top"><p>4</p></td><td align="left" valign="top"><p>Column 1</p></td></tr><tr><td align="left" valign="top"><p>5</p></td><td align="left" valign="top"><p>Column 2</p></td></tr><tr><td align="left" valign="top"><p>6</p></td><td align="left" valign="top"><p>Column 3</p></td></tr><tr><td align="left" valign="top"><p>7</p></td><td align="left" valign="top"><p>Column 4</p></td></tr></tbody></table></div><p>Note: To use a 3 x 3 keypad in this mode, the pins on the
microcontroller for any unused columns must be pulled up.</p></div></body></html>