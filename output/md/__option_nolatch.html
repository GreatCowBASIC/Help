<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>#Option NoLatch</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_compiler_options.html" title="Compiler Options"><link rel="prev" href="__option_nocontextsave.html" title="#Option NoContextSave"><link rel="next" href="__option_required.html" title="#Option Required"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="__option_nolatch"></a>#Option NoLatch</h3></div></div></div><p><span class="strong"><strong>Syntax:</strong></span></p><pre class="screen">    #option nolatch</pre><p>This option disables PORTx to LATx redirection.</p><p><span class="strong"><strong>Introduction:</strong></span></p><p>The GCBASIC compiler will  redirect all I/O pin writes from PORTx to LATx registers on 16F1/18F Microchip PIC microcontrollers.</p><p>The Microchip PIC mid-range microcontrollers use a sequence known as <span class="strong"><strong>Read-Modify-Write</strong></span> (RMW) when changing an output state  (1 or 0) on a pin.  This can cause unexpected behavior under certain circumstances.</p><p>When your program changes the state on a specific pin, for example RB0 in PORTB, the microcontroller first <span class="strong"><strong>READs</strong></span> all 8 bits of the PORTB register which represents the states of all 8 pins in PORTB (RB7-RB0).</p><p>The microcontroller then stores this data in the MCU. The bit associated with RB that you&#8217;ve commanded to <span class="strong"><strong>MODIFY</strong></span>  is changed, and then the microcontrollers <span class="strong"><strong>WRITEs</strong></span> all 8 bits (RB7- RB0) back to the PORTB register.</p><p>During the first reading of the PORT register, you will be reading the actual state of the physical pin.  The problem arises when an output pin is loaded in such a way that its logic state is affected by the load. Instances of such loads are LEDs without current-limiting resistors or loads with high capacitance or inductance.</p><p>For example, if a capacitor is attached between pin and ground, it will take a short while to charge when the pin is set to 1.  On the other hand, if the capacitor is discharged, it acts like a short circuit, forcing the pin to '0' state,  and, therefore, a read of the PORT register will return 0, even though we wrote a 1 to it.</p><p>GCBASIC resolves this issue using the LATx register when writing to ports, rather than using PORTx registers.  Writing to a LATx register is equivalent to writing to a PORTx register, but readings from LATx registers return
the data value held in the port latch, regardless of the state of the actual pin. So, for reading use PORTx.</p><p><span class="strong"><strong>Note:</strong></span></p><p>You can use the <code class="literal">#option nolatch</code> if problems occur with compiler redirection.</p></div></body></html>