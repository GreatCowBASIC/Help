<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Development Guide for GCBASIC Preferences Editor</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_gcbasic_maintenance_and_development.html" title="GCBASIC Maintenance and Development"><link rel="prev" href="_development_guide_for_gcbasic_exe_compiler.html" title="Development Guide for GCBASIC.EXE compiler"><link rel="next" href="_gcbasic_with_the_avrisp_or_mkii_programmer.html" title="GCBASIC with the AVRISP or MKII Programmer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_development_guide_for_gcbasic_preferences_editor"></a>Development Guide for GCBASIC Preferences Editor</h3></div></div></div><p>This section deals with the GCBASIC Preferences Editor (Pref Editor).&nbsp;&nbsp;
The Prefs Editor is the software enables the user to select programmers, select the options when compiling, select the assembler and other settings.&nbsp;&nbsp;
The Prefs Editor uses an ini to read and store the compiler settings.&nbsp;&nbsp;
The INI structure is explained the first section, then, the Prefs Editor in detail.</p><p><br></p><p><span class="strong"><strong>ABOUT THE INI FILES</strong></span></p><p>You can provide the compiler an INI file with a number of settings and programmers.&nbsp;&nbsp;</p><p>The following section provide details of the specifics within an example INI file.&nbsp;&nbsp;
The comments are NOT part of an INI file.&nbsp;&nbsp;</p><p>The settings are in the INI section called [gcbasic].&nbsp;&nbsp;</p><pre class="screen">    [gcbasic]
    programmer = arduinouno, pickitpluscmd1, lgt8f328p-1, xpress, pickit2cmdline, nsprog            - the currently selected available programmers
    showprogresscounters = n                                                                        - show percent values as compiler runs. requires Verbose = y
    verbose = y                                                                                     - show verbose compiler information
    preserve = n                                                                                    - preservice source program in ASM
    warningsaserrors = n                                                                            - treat Warnings from scripts as errors. Errors will cause the compiler to cease on an Error(s)
    pauseaftercompile = n                                                                           - pause after compiler. Do not do this with IDEs
    flashonly = n                                                                                   - Flash the chip is source older that hex file
    assembler = GCASM                                                                               - currently selected Assembler
    hexappendgcbmessage = n                                                                         - appends a message in the HEX file
    laxsyntax = n                                                                                   - use lax syntax when Y, the compiler will not check that reserved words are being used
    mutebanners = n                                                                                 - mutes the post compilation messages
    evbs = n                                                                                        - show extra verbose compiler information, requires Verbose = y
    nosummary = n                                                                                   - mutes almost all messages psot compilation
    extendedverbosemessages = n                                                                     - show even more verbose compiler information, requires Verbose = y
    conditionaldebugfile =                                                                          - creates CDF file
    columnwidth = 180                                                                               - ASM width before wrapping
    picasdebug = n                                                                                  - adds PIC-AS preprocessor message to .S file
    datfileinspection = y                                                                           - inspects DAT for memory validation
    methodstructuredebug  = n                                                                       - show method structure start &amp; end for validation
    floatcapability =  1                                                                            - 1 = singles
                                                                                                    - 2 = doubles
                                                                                                    - 4 = longint
                                                                                                    - 8 = uLongINT
    compilerdebug =  0                                                                              - 1 = COMPILECALCADD
                                                                                                    - 2 = VAR SET
                                                                                                    - 4 = CALCOPS
                                                                                                    - 8 = COMPILECALCMULT</pre><p>The section shows an example [tool] assembler section.&nbsp;&nbsp;</p><pre class="screen">    [tool=pic-as]
    'An assember
    type = assembler
    'Location of the assember using a parameter substitution.
    command = %picaslocation%\pic-as.exe
    'Parameters
    params = -mcpu=%ChipModel%  "%Fn_NoExt%.S" -msummary=-mem,+psect,-class,-hex,-file,-sha1,-sha256,-xml,-xmlfull  -Wl -mcallgraph=std -mno-download-hex -o"%Fn_NoExt%.hex"  -Wl,-Map="%Fn_NoExt%.map" -Wa,-a

    [tool=mpasm]
    'An assember
    type = assembler
    'Location of the assember using a parameter substitution.
    command = %mpasmlocation%\mpasmx.exe
    'Paramters
    params = /c- /o- /q+ /l+ /x- /w1 "%FileName%"</pre><p>The section shows an example [patch] section.</p><p>This section shows and explicit set of patches applied to PIC-AS assembler.</p><pre class="screen">    [patch=asm2picas]
    desc = PICAS correction entries.  Format is STRICT as follows:  Must have quotes and the equal sign as the delimeter. PartName +COLON+"BadConfig"="GoodConfig"    Where BadConfig is from .s file and GoodConfig is from .cfgmap file
    16f88x:"intoscio = "="FOSC=INTRC_NOCLKOUT"
    16f8x:"intrc = IO"="FOSC=INTOSCIO"
    12f67x:"intrc = OSC_NOCLKOUT"="FOSC=INTRCIO"</pre><p>The section shows an example [programmer] section.&nbsp;&nbsp;</p><pre class="screen">    [tool = pk4_pic_ipecmd_program_release_from_reset]
    'Description
    desc = MPLAB-IPE PK4 CLI for PIC 5v0
    'A programmer
    type = programmer
    'Command line using a parameter substitution.
    command = %mplabxipedirectory%\ipecmd.exe
    'Parameters using a parameter substitution.
    params = -TPPK4 -P%chipmodel%  -F"%filename%" -M  -E -OL -W5
    'Worting direcroty using a parameter substitution.
    workingdir = %mplabxipedirectory%
    'Useif constraints - this shows none
    useif =
    'Mandated programming config constraints - this shows none
    progconfig =</pre><p><span class="strong"><strong>ABOUT THE PREFS EDITOR</strong></span></p><p>This is a utility for editing GCBASIC ini files.&nbsp;&nbsp;
It is derived from the Graphical GCBASIC utilities, and requires some files from Graphical GCBASIC to compile.&nbsp;&nbsp;</p><p>The software is developed using Sharp Develop v.3.2.1 ( not Visual Studio ).&nbsp;&nbsp;</p><p><br></p><p><span class="strong"><strong>COMPILING</strong></span></p><p>Ensure that the "Programmer Editor" folder is in the same folder as a "Graphical GCBASIC" folder.&nbsp;&nbsp;
The "Graphical GCBASIC" folder must contain the following files from GCGB:
 - Preferences.vb
 - PreferencesWindow.vb
 - ProgrammerEditor.vb
 - Translator.vb
 - ProgrammerEditor.resources</p><p>Once these files are in place, it should be possible to compile the Programmer Editor using SharpDevelop 3.2 (or similar).</p><p><br></p><p><span class="strong"><strong>USING PREFS EDITOR</strong></span></p><p>If run without any parameters, this program will create an ini file in whatever directory it is located in.&nbsp;&nbsp;
If it is given the name of an ini file as a command line parameter, it will use that file.&nbsp;&nbsp;</p><p>As well as the ini file it is told to load, this program will also read any files that are included from that file..&nbsp;&nbsp;
This makes it possible to keep the settings file in the Application Data folder if GCBASIC is installed in the Program Files directory..&nbsp;&nbsp;
To put the settings file into the Application Data folder, create a small ini file containing the following 3 lines and place it in the same directory as this program:</p><pre class="screen">    include %appdata%\gcgb.ini
    [gcgb]
    useappdata = true</pre><p>The include line tells the program (and GCBASIC) to read from the Application Data folder.&nbsp;&nbsp;
The useappdata=true line in the [gcgb] section will cause this program to write any output to a file in Application Data called gcgb.ini.&nbsp;&nbsp;
The hard coding of GCGB is required this program is based on GCGB.&nbsp;&nbsp;
It will result in programmer definitions being shared between GCGB and any other environment using this editor, which may be a positive side effect.</p><p><br></p><p><span class="strong"><strong>BUILDING THE PROGRAMMER EDITOR EXECUTABLE USING SHARP DEVELOP</strong></span></p><p>To build Prefs Editor from the source files.&nbsp;&nbsp;
The list shows the installation of the Sharp Develop IDE.</p><p>Complete the following:</p><pre class="screen">        1. Download and install Sharp Develop from  https://sourceforge.net/projects/sharpdevelop/files/SharpDevelop%203.x/3.2/[SourceForge]
        2. Download the Prefs Editor source using SVN into a source folder.  This is the folder ..\utils\Programmer Editor
        4. Run Sharp Develop (installed at step #1).  Load project  "Programmer Editor.sln"  from source source folder.
        5. Hit &lt;f8&gt; to compile.</pre><p><br>
<br>
<br>
<br></p></div></body></html>