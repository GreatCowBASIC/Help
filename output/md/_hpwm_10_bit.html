<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>HPWM 10 Bit</title><link rel="stylesheet" type="text/css" href="gcbdoc.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="GCBASIC documentation"><link rel="up" href="_microchip_pic_pwm_overview.html" title="Microchip PIC PWM Overview"><link rel="prev" href="_hpwmoff_2.html" title="HPWMOff"><link rel="next" href="_hpwmupdate_for_pwm_module_s.html" title="HPWMUpdate for PWM Module(s)"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section"><div class="titlepage"><div><div><h5 class="title"><a name="_hpwm_10_bit"></a>HPWM 10 Bit</h5></div></div></div><p><span class="strong"><strong>Syntax:</strong></span></p><pre class="screen">    HPWM <span class="emphasis"><em>channel, frequency, duty cycle, timer [, resolution]</em></span></pre><p><span class="strong"><strong>Command Availability:</strong></span></p><p><span class="strong"><strong>Only</strong></span> available on Microchip PIC microcontrollers with the 10-bit PWM module.</p><p>For the Capture/Compare/PWM (CCP) module, see here <a class="link" href="_hpwm_ccp.html" title="HPWM CCP">HPWM CCP</a></p><p><span class="strong"><strong>Explanation:</strong></span></p><p>This command sets up the hardware PWM module of the Microchip PIC microcontroller to generate
a PWM waveform of the given frequency and duty cycle. Once this command
is called, the PWM will be emitted until PWMOff is called.</p><p><code class="literal"><span class="emphasis"><em>channel</em></span></code> is 1, 2, 3, 4, 5, 6, 7 or 8. These corresponds to the HPWM1 through to HPWM8 respectively.<br>
The 10-bit PWM channel <span class="strong"><strong>MUST</strong></span> be supported by the microcontroller.   Check the microcontroller specific datasheet for the available channel.</p><p><code class="literal"><span class="emphasis"><em>frequency</em></span></code> sets the frequency of the PWM output. It is measured in KHz.
The maximum value allowed is 255 KHz. The minimum value varies depending
on the clock speed. 1 KHz is the minimum on chips 16 MHz or under and 2
Khz is the lowest possible on 20 MHz chips. In situations that do not
require a specific PWM frequency, the PWM frequency should equal
approximately 1 five-hundredth the clock speed of the microcontroller (ie 40 Khz on
a 20 MHz chip, 16 KHz on an 8 MHz chip). This gives the best duty cycle
resolution possible.</p><p><code class="literal"><span class="emphasis"><em>duty cycle</em></span></code> specifies the desired duty cycle of the PWM signal, and
ranges from 0 to 1023 where 1023 is 100% duty cycle.&nbsp;&nbsp;&nbsp; This should be a WORD value. &nbsp;&nbsp;&nbsp;Note: Byte values are supported as a Byte value is factorised to a Word value. To use a Byte value and to ensure the 10-bit resolution you should cast the parameter as a Word, [WORD]byte_value or  [WORD]constant_value</p><p><code class="literal"><span class="emphasis"><em>timer</em></span></code> specifies the desired timer to be used. These can be timer 2, 4 or 6.</p><p>Optional <code class="literal"><span class="emphasis"><em>resolution</em></span></code> specifies the desired resolution to be used. These can be either 255 or 1023.  The rational of this optional parameter is to support the duty cycle with a BYTE or a WORD range.  If you call the method with a WORD the resolution will be set to 1023.</p><p><br>
<br>
<span class="strong"><strong>Notes:</strong></span></p><p>PWM channels 1 and 2 are disable by default.&nbsp;&nbsp;You must enable using the constants USE_HPWMn where n is the PWM channel you want to enable.&nbsp;&nbsp;You can disable any PWM channel by setting the appropiatge change to FALSE.</p><p>On some microcontrollers you may need to set the port.pin as an output for PWM to operated as desired.
<br></p><pre class="screen">        #define USE_HPWM1 TRUE
        #define USE_HPWM2 TRUE</pre><p><br>
<br>
<span class="strong"><strong>Example 1:</strong></span></p><pre class="screen">    'This program will alter the brightness of an LED using
    'hardware PWM.

    'Select chip model and speed
    #chip 16F18855, 32

    'Generated by PIC PPS Tool for GCBASIC
    '
    'Template comment at the start of the config file
    '
    #startup InitPPS, 85

    Sub InitPPS

            'Module: PWM6
            RA2PPS = 0x000E    'PWM6OUT &gt; RA2

    End Sub
    'Template comment at the end of the config file


    'Set the PWM pin to output mode
    DIR PORTA.2 out

    dim Bright as word

    'Main code
    do
        'Turn up brightness over the range
        For Bright = 0 to 1023
            HPWM 6, 40, Bright, 2
            wait 10 ms
        next
        'Turn down brightness over the range
        For Bright = 1023 to 0 Step -1
            HPWM 6, 40, Bright, 2
            wait 10 ms
        next
    loop</pre><p><span class="strong"><strong>Example 2:</strong></span></p><pre class="screen">    'This program will alter the brightness of an LED using
    'hardware PWM.

    'Select chip model and speed
    #chip 16F1705, 32

    'Generated by PIC PPS Tool for GCBASIC
    '
    'Template comment at the start of the config file
    '
    #startup InitPPS, 85

    Sub InitPPS

            'Module: PWM3
            RA2PPS = 0x000E    'PWM3OUT &gt; RA2

    End Sub
    'Template comment at the end of the config file


    'Set the PWM pin to output mode
    DIR PORTA.2 out

    dim Bright as word

    'Main code
    do
        'Turn up brightness over the range
        For Bright = 0 to 1023
            HPWM 3, 40, Bright, 2
            wait 10 ms
        next
        'Turn down brightness over the range
        For Bright = 1023 to 0 Step -1
            HPWM 3, 40, Bright, 2
            wait 10 ms
        next
    loop</pre><p><span class="strong"><strong>For more help, see</strong></span> <a class="link" href="_pwmoff.html" title="PWMOff">PWMOff</a></p></div></body></html>